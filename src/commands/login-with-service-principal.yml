description: Initilize the Azure CLI

parameters:
  azure-username:
    description: Azure account username or Service Principal name
    type: env_var_name
    default: AZURE_USERNAME

  azure-password:
    description: Azure account password or Service Principal password
    type: env_var_name
    default: AZURE_PASSWORD

  azure-tenant:
    description: Tenant to sign in with
    type: env_var_name
    default: AZURE_TENANT

steps:
  - run:
      name: Login to the Azure CLI via Service Principal
      command: >
        az login \
          --service-principal \
          --tenant $<<parameters.azure-tenant>> \
          -u $<<parameters.azure-username>> \
          -p $<<parameters.azure-password>>
